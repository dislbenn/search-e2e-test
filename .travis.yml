sudo: required
language: node_js

addons:
  packages:
    - openjdk-8-jdk
  chrome: stable

services:
  - docker
  - xvfb

# Only build on master, stable branches and tag
# The stable branch and tag should be leading with numbers
branches:
  only:
    - master
    - /^[0-9]+\..*$/
    - /^v[0-9]+\..*$/
    - /^release-[0-9]+\..*$/

before_install:
  # https://github.com/golang/dep/blob/master/docs/FAQ.md#how-do-i-get-dep-to-authenticate-via-ssh-to-a-git-repo
  - git config --global url."git@github.ibm.com:".insteadOf "https://github.ibm.com/"
  - source cloudctl.sh
  - source install_mcm_chart.sh

script:
 - npm install
 - npm run test:e2e
 - source chk_updates.sh
